
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://memiiso.github.io/debezium-server-bigquery/configuration/">
      
      
        <link rel="prev" href="../bigquerystream/">
      
      
        <link rel="next" href="../contributing/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Configuration - Debezium Server Bigquery Consumer</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#shared-configs-for-both-consumers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Debezium Server Bigquery Consumer" class="md-header__button md-logo" aria-label="Debezium Server Bigquery Consumer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Debezium Server Bigquery Consumer
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/memiiso/debezium-server-bigquery" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../bigquerybatch/" class="md-tabs__link">
        
  
  
    
  
  bigquerybatch

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../bigquerystream/" class="md-tabs__link">
        
  
  
    
  
  bigquerystream

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  Configuration

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Debezium Server Bigquery Consumer" class="md-nav__button md-logo" aria-label="Debezium Server Bigquery Consumer" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Debezium Server Bigquery Consumer
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/memiiso/debezium-server-bigquery" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bigquerybatch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bigquerybatch
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bigquerystream/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bigquerystream
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-type-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Data type mapping
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data type mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mandatory-config" class="md-nav__link">
    <span class="md-ellipsis">
      Mandatory config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mandatory config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debezium-event-format-and-schema" class="md-nav__link">
    <span class="md-ellipsis">
      Debezium Event format and schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flattening-event-data" class="md-nav__link">
    <span class="md-ellipsis">
      Flattening Event Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimizing-batch-size-or-commit-interval" class="md-nav__link">
    <span class="md-ellipsis">
      Optimizing batch size (or commit interval)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Optimizing batch size (or commit interval)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nobatchsizewait" class="md-nav__link">
    <span class="md-ellipsis">
      NoBatchSizeWait
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#maxbatchsizewait" class="md-nav__link">
    <span class="md-ellipsis">
      MaxBatchSizeWait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bigquery-offset-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Bigquery Offset Storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bigquery-database-history-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Bigquery Database History Storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-log-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring log levels
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="shared-configs-for-both-consumers">Shared Configs for both consumers</h1>
<table>
<thead>
<tr>
<th>Config</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>debezium.sink.batch.destination-regexp</code></td>
<td>``</td>
<td>Regexp to modify destination. With this its possible to map <code>table_ptt1</code>,<code>table_ptt2</code> to <code>table_combined</code>.</td>
</tr>
<tr>
<td><code>debezium.sink.batch.destination-regexp-replace</code></td>
<td>``</td>
<td>Regexp Replace part to modify destination</td>
</tr>
<tr>
<td><code>debezium.sink.batch.batch-size-wait</code></td>
<td><code>NoBatchSizeWait</code></td>
<td>Batch size wait strategy to optimize data files and upload interval. explained below.</td>
</tr>
<tr>
<td><code>debezium.sink.batch.batch-size-wait.max-wait-ms</code></td>
<td><code>300000</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.sink.batch.batch-size-wait.wait-interval-ms</code></td>
<td><code>10000</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.max.batch.size</code></td>
<td><code>2048</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.format.value</code></td>
<td><code>json</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.format.key</code></td>
<td><code>json</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.time.precision.mode</code></td>
<td><code>isostring</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.decimal.handling.mode</code></td>
<td><code>double</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.format.value.schemas.enable</code></td>
<td><code>true</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.format.key.schemas.enable</code></td>
<td><code>true</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.offset.storage</code></td>
<td><code>io.debezium.server.bigquery.offset.BigqueryOffsetBackingStore</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.offset.storage.bigquery.table-name</code></td>
<td><code>_debezium_offset_storage</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.schema.history.internal</code></td>
<td><code>io.debezium.server.bigquery.history.BigquerySchemaHistory</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.source.schema.history.internal.bigquery.table-name</code></td>
<td><code>_debezium_database_history_storage</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.transforms</code></td>
<td><code>unwrap</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.type</code></td>
<td><code>io.debezium.transforms.ExtractNewRecordState</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.add.fields</code></td>
<td><code>op,table,source.ts_ms,db,ts_ms,ts_ns,source.ts_ns</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.delete.tombstone.handling.mode</code></td>
<td><code>rewrite</code></td>
<td></td>
</tr>
<tr>
<td><code>debezium.transforms.unwrap.drop.tombstones</code></td>
<td><code>true</code></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="data-type-mapping">Data type mapping</h2>
<p>Data type mapping listed below.</p>
<table>
<thead>
<tr>
<th>Debezium Semantic Type</th>
<th>Debezium Field Type</th>
<th>Bigquery Batch</th>
<th>Bigquery Stream</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>int8-int64</td>
<td>INT64</td>
<td>INT64</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.Date</td>
<td>int32</td>
<td>DATE</td>
<td>DATE</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.Timestamp</td>
<td>int64</td>
<td>INT64</td>
<td>INT64</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.MicroTimestamp</td>
<td>int64</td>
<td>INT64</td>
<td>INT64</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.NanoTimestamp</td>
<td>int64</td>
<td>INT64</td>
<td>INT64</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.IsoDate</td>
<td>string</td>
<td>DATE</td>
<td>DATE</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.IsoTimestamp</td>
<td>string</td>
<td>DATETIME</td>
<td>DATETIME</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.IsoTime</td>
<td>string</td>
<td>TIME</td>
<td>TIME</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.ZonedTimestamp</td>
<td>string</td>
<td>TIMESTAMP</td>
<td>TIMESTAMP</td>
<td></td>
</tr>
<tr>
<td>io.debezium.time.ZonedTime</td>
<td>string</td>
<td>TIME (STRING before&lt;0.8.0.Beta)</td>
<td>TIME (STRING before &lt;0.8.0.Beta)</td>
<td></td>
</tr>
<tr>
<td>io.debezium.data.Json</td>
<td>string</td>
<td>JSON</td>
<td>JSON</td>
<td></td>
</tr>
<tr>
<td>io.debezium.data.geometry.Geometry</td>
<td>struct</td>
<td>STRUCT(srid:INT64, wkb:GEOGRAPHY)</td>
<td>STRUCT(srid:INT64, wkb:GEOGRAPHY)</td>
<td>version <code>0.8.0.Beta</code> and above.</td>
</tr>
<tr>
<td></td>
<td>string</td>
<td>STRING</td>
<td>STRING</td>
<td></td>
</tr>
<tr>
<td></td>
<td>double</td>
<td>FLOAT64</td>
<td>FLOAT64</td>
<td></td>
</tr>
<tr>
<td></td>
<td>float8-float64</td>
<td>FLOAT64</td>
<td>FLOAT64</td>
<td></td>
</tr>
<tr>
<td></td>
<td>boolean</td>
<td>BOOL</td>
<td>BOOL</td>
<td></td>
</tr>
<tr>
<td></td>
<td>bytes</td>
<td>BYTES</td>
<td>BYTES (STRING before &lt;0.8.0.Beta)</td>
<td></td>
</tr>
<tr>
<td></td>
<td>array</td>
<td>ARRAY</td>
<td>ARRAY</td>
<td></td>
</tr>
<tr>
<td></td>
<td>map</td>
<td>STRUCT</td>
<td>STRUCT</td>
<td></td>
</tr>
<tr>
<td></td>
<td>struct</td>
<td>STRUCT</td>
<td>STRUCT</td>
<td></td>
</tr>
</tbody>
</table>
<p>Handling of special fields:</p>
<table>
<thead>
<tr>
<th>Field Name</th>
<th>Debezium Semantic Type</th>
<th>Debezium Field Type</th>
<th>Bigquery Batch</th>
<th>Bigquery Stream</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__ts_ms</code>, <code>__source_ts_ms</code></td>
<td></td>
<td>int64</td>
<td>TIMESTAMP</td>
<td>TIMESTAMP</td>
<td></td>
</tr>
<tr>
<td><code>__deleted</code></td>
<td></td>
<td>string</td>
<td>BOOL</td>
<td>BOOL</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="mandatory-config">Mandatory config</h3>
<h4 id="debezium-event-format-and-schema">Debezium Event format and schema</h4>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="na">debezium.format.value</span><span class="o">=</span><span class="s">json</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="na">debezium.format.key</span><span class="o">=</span><span class="s">json</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="na">debezium.format.schemas.enable</span><span class="o">=</span><span class="s">true</span>
</span></code></pre></div>
<h4 id="flattening-event-data">Flattening Event Data</h4>
<p>Bigquery consumers requires event flattening, please
see <a href="https://debezium.io/documentation/reference/configuration/event-flattening.html#_configuration">debezium feature</a></p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="na">debezium.transforms</span><span class="o">=</span><span class="s">unwrap</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="na">debezium.transforms.unwrap.type</span><span class="o">=</span><span class="s">io.debezium.transforms.ExtractNewRecordState</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="na">debezium.transforms.unwrap.add.fields</span><span class="o">=</span><span class="s">op,table,lsn,source.ts_ms,source.ts_ns</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="na">debezium.transforms.unwrap.add.headers</span><span class="o">=</span><span class="s">db</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="na">debezium.transforms.unwrap.delete.tombstone.handling.mode</span><span class="o">=</span><span class="s">rewrite</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="na">debezium.transforms.unwrap.drop.tombstones</span><span class="o">=</span><span class="s">true</span>
</span></code></pre></div>
<h3 id="optimizing-batch-size-or-commit-interval">Optimizing batch size (or commit interval)</h3>
<p>Debezium extracts database events in real time and this could cause too frequent commits or too many small files
which is not optimal for batch processing especially when near realtime data feed is sufficient.
To avoid this problem following batch-size-wait classes are used.</p>
<p>Batch size wait adds delay between consumer calls to increase total number of events received per call and meanwhile
events are collected in memory.
This setting should be configured together with <code>debezium.source.max.queue.size</code> and <code>debezium.source.max.batch.size</code>
debezium properties</p>
<h4 id="nobatchsizewait">NoBatchSizeWait</h4>
<p>This is default configuration, by default consumer will not use any wait. All the events are consumed immediately.</p>
<h4 id="maxbatchsizewait">MaxBatchSizeWait</h4>
<p>MaxBatchSizeWait uses debezium metrics to optimize batch size.
MaxBatchSizeWait periodically reads streaming queue current size and waits until number of events reaches
to <code>max.batch.size</code> or until <code>debezium.sink.batch.batch-size-wait.max-wait-ms</code>.</p>
<p>Maximum wait and check intervals are controlled by <code>debezium.sink.batch.batch-size-wait.max-wait-ms</code>
, <code>debezium.sink.batch.batch-size-wait.wait-interval-ms</code> properties.</p>
<p>example setup to receive ~2048 events per commit. maximum wait is set to 30 seconds, streaming queue current size
checked every 5 seconds</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="na">debezium.sink.batch.batch-size-wait</span><span class="o">=</span><span class="s">MaxBatchSizeWait</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="na">debezium.sink.batch.metrics.snapshot-mbean</span><span class="o">=</span><span class="s">debezium.postgres:type=connector-metrics,context=snapshot,server=testc</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="na">debezium.sink.batch.metrics.streaming-mbean</span><span class="o">=</span><span class="s">debezium.postgres:type=connector-metrics,context=streaming,server=testc</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="na">debezium.source.connector.class</span><span class="o">=</span><span class="s">io.debezium.connector.postgresql.PostgresConnector</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="na">debezium.source.max.batch.size</span><span class="o">=</span><span class="s">2048;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="na">debezium.source.max.queue.size</span><span class="o">=</span><span class="s">16000&quot;;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="na">debezium.sink.batch.batch-size-wait.max-wait-ms</span><span class="o">=</span><span class="s">30000</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="na">debezium.sink.batch.batch-size-wait.wait-interval-ms</span><span class="o">=</span><span class="s">5000</span>
</span></code></pre></div>
<h2 id="bigquery-offset-storage">Bigquery Offset Storage</h2>
<p>This implementation saves CDC offset to a bigquery table, along the destination data. With this no additional dependency
required to manage the application.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>debezium.source.offset.storage=io.debezium.server.bigquery.offset.BigqueryOffsetBackingStore
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>debezium.source.offset.storage.bigquery.table-name=debezium_offset_storage_custom_table
</span></code></pre></div>
<h2 id="bigquery-database-history-storage">Bigquery Database History Storage</h2>
<p>This implementation saves database history to a bigquery table, along the destination data. With this no additional
dependency required to manage the application.</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="na">debezium.source.database.history</span><span class="o">=</span><span class="s">io.debezium.server.bigquery.history.BigquerySchemaHistory</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="na">debezium.source.database.history.bigquery.table-name</span><span class="o">=</span><span class="s">__debezium_database_history_storage_test_table</span>
</span></code></pre></div>
<h2 id="configuring-log-levels">Configuring log levels</h2>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="na">quarkus.log.level</span><span class="o">=</span><span class="s">INFO</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1"># Ignore messages below warning level from Jetty, because it&#39;s a bit verbose</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="na">quarkus.log.category.&quot;org.eclipse.jetty&quot;.level</span><span class="o">=</span><span class="s">WARN</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1">#</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "navigation.tabs", "toc.integrate", "content.code.copy", "content.tabs.link"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>